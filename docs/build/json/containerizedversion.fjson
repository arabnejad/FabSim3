{
    "body": "<div class=\"section\" id=\"singularity-usage\">\n<span id=\"containerizedversion\"></span><h1>Singularity Usage<a class=\"headerlink\" href=\"#singularity-usage\" title=\"Permalink to this headline\">\u00b6</a></h1>\n<p>In this tutorial, we will explain how to download, setup, and run <a class=\"reference external\" href=\"https://github.com/djgroen/FabSim3\">FabSim3</a> within a singularity container image.</p>\n<div class=\"section\" id=\"dependencies\">\n<h2>Dependencies<a class=\"headerlink\" href=\"#dependencies\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<ul class=\"simple\">\n<li><a class=\"reference external\" href=\"https://www.sylabs.io\">Singularity</a>, which you can download and install from <a class=\"reference external\" href=\"https://www.sylabs.io/guides/3.0/user-guide/installation.html\">here</a>.</li>\n<li><a class=\"reference external\" href=\"https://www.openssh.com/\">OpenSSH Server</a>:</li>\n</ul>\n<p>Installation under Ubuntu Linux:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">sudo</span> <span class=\"n\">apt</span> <span class=\"n\">install</span> <span class=\"n\">openssh</span><span class=\"o\">-</span><span class=\"n\">server</span>\n</pre></div>\n</div>\n<p>Installations under CentOS Linux:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">sudo</span> <span class=\"n\">yum</span> <span class=\"n\">install</span> <span class=\"o\">-</span><span class=\"n\">y</span> <span class=\"n\">openssh</span><span class=\"o\">-</span><span class=\"n\">server</span>\n</pre></div>\n</div>\n</div>\n<div class=\"section\" id=\"installation\">\n<h2>Installation<a class=\"headerlink\" href=\"#installation\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>Download the singularity image from <a class=\"reference external\" href=\"https://singularity-hub.org/\">Singularity Hub</a>:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">singularity</span> <span class=\"n\">pull</span> <span class=\"o\">--</span><span class=\"n\">name</span> <span class=\"n\">fabsim</span><span class=\"o\">.</span><span class=\"n\">simg</span> <span class=\"n\">shub</span><span class=\"p\">:</span><span class=\"o\">//</span><span class=\"n\">arabnejad</span><span class=\"o\">/</span><span class=\"n\">FabSim3</span>\n</pre></div>\n</div>\n<div class=\"admonition note\">\n<p class=\"first admonition-title\">Note</p>\n<p class=\"last\">The download image should be kept as <code class=\"docutils literal notranslate\"><span class=\"pre\">fabsim.simg</span></code>, this filename will be used later for setting environment variable and alias names in your <code class=\"docutils literal notranslate\"><span class=\"pre\">bashrc</span></code> file.</p>\n</div>\n<p>To see How to Use Fabsim3 singularity:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"o\">./</span><span class=\"n\">fabsim</span><span class=\"o\">.</span><span class=\"n\">simg</span> <span class=\"o\">--</span><span class=\"n\">help</span>\n</pre></div>\n</div>\n<p>or</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"o\">./</span><span class=\"n\">fabsim</span><span class=\"o\">.</span><span class=\"n\">simg</span> <span class=\"o\">-</span><span class=\"n\">h</span>\n</pre></div>\n</div>\n<p>Running the following will download the <a class=\"reference external\" href=\"https://github.com/djgroen/FabSim3\">FabSim3</a> library in your local machine:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"o\">./</span><span class=\"n\">fabsim</span><span class=\"o\">.</span><span class=\"n\">simg</span> <span class=\"o\">--</span><span class=\"n\">install</span> <span class=\"p\">[</span><span class=\"n\">fabsim_INSTALL_DIR</span><span class=\"p\">]</span>\n</pre></div>\n</div>\n<p>or</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"o\">./</span><span class=\"n\">fabsim</span><span class=\"o\">.</span><span class=\"n\">simg</span> <span class=\"o\">-</span><span class=\"n\">i</span> <span class=\"p\">[</span><span class=\"n\">fabsim_INSTALL_DIR</span><span class=\"p\">]</span>\n</pre></div>\n</div>\n<p>By default, it will be downloaded in sub-folder <code class=\"docutils literal notranslate\"><span class=\"pre\">FabSim3</span></code> in your current directory, you also can set the installation directory by setting <code class=\"docutils literal notranslate\"><span class=\"pre\">[fabsim_INSTALL_DIR]</span></code> parameter.</p>\n<p>At the end of installation part, you will received a message, which explain how you should setup your PC for further usage:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"o\">./</span><span class=\"n\">fabsim</span><span class=\"o\">.</span><span class=\"n\">simg</span> <span class=\"o\">-</span><span class=\"n\">i</span> <span class=\"p\">[</span><span class=\"n\">fabsim_INSTALL_DIR</span><span class=\"p\">]</span>\n</pre></div>\n</div>\n<p>Please add/load the generated <code class=\"docutils literal notranslate\"><span class=\"pre\">fabsim_env.conf</span></code> in your <code class=\"docutils literal notranslate\"><span class=\"pre\">~/.bashrc</span></code>.</p>\n<p>To load:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span>$ source \\${fabsim_INSTALL_DIR}/fabsim_env.conf\n</pre></div>\n</div>\n<p>To add to your <code class=\"docutils literal notranslate\"><span class=\"pre\">~/.bashrc</span></code>:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span>$ echo \\&quot;source \\${fabsim_INSTALL_DIR}/fabsim_env.conf\\&quot; &gt;&gt; ~/.bashrc\n$ source ~/.bashrc\n</pre></div>\n</div>\n<p><code class=\"docutils literal notranslate\"><span class=\"pre\">fabsim_INSTALL_DIR</span></code> will be replaced by your local machine path.</p>\n<p>After, loading the environment variable from <code class=\"docutils literal notranslate\"><span class=\"pre\">fabsim_env.conf</span></code> into your into the current shell script, <strong>fab</strong> command will be available as a alias name to run for singularity image and accept all FabSim3 command.</p>\n<p>For <a class=\"reference external\" href=\"http://www.qoscosgrid.org/trac/qcg\">QCG</a> users,</p>\n<ul>\n<li><p class=\"first\">Please make sure, you udpate/replace <code class=\"docutils literal notranslate\"><span class=\"pre\">username:</span> <span class=\"pre\">&quot;plg&lt;your-username&gt;&quot;</span></code> with your username account in <code class=\"docutils literal notranslate\"><span class=\"pre\">{fabsim_INSTALL_DIR}/deploy/machines_user.yml</span></code>.</p>\n</li>\n<li><p class=\"first\">Sets up SSH key pairs for FabSim3 access:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">fab</span> <span class=\"n\">qcg</span> <span class=\"n\">setup_ssh_keys</span>\n</pre></div>\n</div>\n</li>\n<li><p class=\"first\">Please create a <strong>globus</strong> in your <strong>$HOME</strong> directory, If Not Exist:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">mkdir</span> <span class=\"o\">-</span><span class=\"n\">p</span> <span class=\"o\">~/.</span><span class=\"n\">globus</span>\n</pre></div>\n</div>\n</li>\n<li><p class=\"first\">Copy <code class=\"docutils literal notranslate\"><span class=\"pre\">usercert.pem</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">userkey.pem</span></code> from your account to <code class=\"docutils literal notranslate\"><span class=\"pre\">~/.globus</span></code>:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">scp</span> <span class=\"n\">plg</span><span class=\"o\">&lt;</span><span class=\"n\">user</span><span class=\"o\">&gt;</span><span class=\"nd\">@eagle</span><span class=\"o\">.</span><span class=\"n\">man</span><span class=\"o\">.</span><span class=\"n\">poznan</span><span class=\"o\">.</span><span class=\"n\">pl</span><span class=\"p\">:</span><span class=\"o\">~/.</span><span class=\"n\">globus</span><span class=\"o\">/</span><span class=\"n\">usercert</span><span class=\"o\">.</span><span class=\"n\">pem</span> <span class=\"o\">~/.</span><span class=\"n\">globus</span>\n<span class=\"n\">scp</span> <span class=\"n\">plg</span><span class=\"o\">&lt;</span><span class=\"n\">user</span><span class=\"o\">&gt;</span><span class=\"nd\">@eagle</span><span class=\"o\">.</span><span class=\"n\">man</span><span class=\"o\">.</span><span class=\"n\">poznan</span><span class=\"o\">.</span><span class=\"n\">pl</span><span class=\"p\">:</span><span class=\"o\">~/.</span><span class=\"n\">globus</span><span class=\"o\">/</span><span class=\"n\">userkey</span><span class=\"o\">.</span><span class=\"n\">pem</span> <span class=\"o\">~/.</span><span class=\"n\">globus</span>\n</pre></div>\n</div>\n</li>\n</ul>\n</div>\n</div>\n",
    "title": "Singularity Usage",
    "sourcename": "containerizedversion.rst.txt",
    "current_page_name": "containerizedversion",
    "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">Singularity Usage</a><ul>\n<li><a class=\"reference internal\" href=\"#dependencies\">Dependencies</a></li>\n<li><a class=\"reference internal\" href=\"#installation\">Installation</a></li>\n</ul>\n</li>\n</ul>\n",
    "page_source_suffix": ".rst"
}